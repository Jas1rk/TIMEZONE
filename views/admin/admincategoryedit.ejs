<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>TimeZone</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/admin-assets/imgs/theme/timezone Logo.png"
    />
    <!-- Template CSS -->
    <link href="/admin-assets//css/main.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
      <div class="aside-top">
        <div
          class="logo logo-width-1"
          style="width: 110px; height: 100px; overflow: hidden"
        >
          <a href="/"
            ><img
              src="/admin-assets/imgs/theme/timezone Logo.png"
              style="min-width: 100%"
              alt="logo"
          /></a>
        </div>
        <div>
          <button class="btn btn-icon btn-aside-minimize">
            <i class="text-muted material-icons md-menu_open"></i>
          </button>
        </div>
      </div>
      <nav>
        <ul class="menu-aside">
          <li class="menu-item">
            <a class="menu-link" href="/admin/admindash">
              <i class="icon material-icons md-home"></i>
              <span class="text">Dashboard</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/admin/productadmin">
              <i class="icon material-icons md-shopping_bag"></i>
              <span class="text">Products</span>
            </a>
          </li>
          <li class="menu-item">
            <a
              class="menu-link"
              style="background-color: #3f2520"
              href="/admin/admincategory"
            >
              <i
                class="icon material-icons md-shopping_cart"
                style="color: aliceblue"
              ></i>
              <span class="text" style="color: aliceblue">Category</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/admin/userlist">
              <i class="icon material-icons md-store"></i>
              <span class="text">UserList</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/admin/addproduct">
              <i class="icon material-icons md-add_box"></i>
              <span class="text">Add product</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/admin/orderslist">
              <i class="icon material-icons md-monetization_on"></i>
              <span class="text">Orders</span>
            </a>
          </li>

          <li class="menu-item">
            <a class="menu-link" href="/admin/sales">
              <i class="icon material-icons md-receipt"></i>
              <span class="text">Sales report</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/admin/coupons">
              <i class="icon material-icons md-account_balance_wallet"></i>
              <span class="text">Coupon</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="/admin/offers">
              <i class="icon material-icons md-monetization_on"></i>
              <span class="text">Offers</span>
            </a>
          </li>
        </ul>
        <hr />

        <br />
        <br />
      </nav>
    </aside>
    <main class="main-wrap">
      <header class="main-header navbar">
        <div class="col-nav">
          <button
            class="btn btn-icon btn-mobile me-auto"
            data-trigger="#offcanvas_aside"
          >
            <i class="material-icons md-apps"></i>
          </button>
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link btn-icon" href="#">
                <i class="material-icons md-notifications animation-shake"></i>
                <span class="badge rounded-pill">3</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link btn-icon darkmode" href="#">
                <i class="material-icons md-nights_stay"></i>
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="requestfullscreen nav-link btn-icon"
                ><i class="material-icons md-cast"></i
              ></a>
            </li>
            <li class="dropdown nav-item">
              <a
                class="dropdown-toggle"
                data-bs-toggle="dropdown"
                href="#"
                id="dropdownLanguage"
                aria-expanded="false"
                ><i class="material-icons md-public"></i
              ></a>
              <div
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="dropdownLanguage"
              >
                <a class="dropdown-item text-brand" href="#"
                  ><img
                    src="/admin-assets//imgs/theme/flag-us.png"
                    alt="English"
                  />English</a
                >
                <a class="dropdown-item" href="#"
                  ><img
                    src="/admin-assets//imgs/theme/flag-fr.png"
                    alt="Français"
                  />Français</a
                >
                <a class="dropdown-item" href="#"
                  ><img
                    src="/admin-assets//imgs/theme/flag-jp.png"
                    alt="Français"
                  />日本語</a
                >
                <a class="dropdown-item" href="#"
                  ><img
                    src="/admin-assets//imgs/theme/flag-cn.png"
                    alt="Français"
                  />中国人</a
                >
              </div>
            </li>
            <li class="dropdown nav-item">
              <a
                class="dropdown-toggle"
                data-bs-toggle="dropdown"
                href="#"
                id="dropdownAccount"
                aria-expanded="false"
              >
                <img
                  class="img-xs rounded-circle"
                  src="/admin-assets//imgs/people/avatar2.jpg"
                  alt="User"
              /></a>
              <div
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="dropdownAccount"
              >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-perm_identity"></i>Edit
                  Profile</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-settings"></i>Account Settings</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-account_balance_wallet"></i
                  >Wallet</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-receipt"></i>Billing</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-help_outline"></i>Help center</a
                >
                <div class="dropdown-divider"></div>
                <a class="dropdown-item text-danger" href="/admin"
                  ><i class="material-icons md-exit_to_app"></i>Logout</a
                >
              </div>
            </li>
          </ul>
        </div>
      </header>
      <section class="content-main">
        <div class="content-header">
          <div>
            <h2 class="content-title card-title">Edit Categories</h2>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <p id="fillerror" class="text-danger"></p>
              <div class="col-md-12">
                <form id="form" method="post" action="/admin/categoryedit">
                  <div class="mb-4">
                    <label for="product_name" class="form-label">Name</label>

                    <input
                      type="text"
                      placeholder="Type here"
                      class="form-control"
                      id="name"
                      name="name"
                      value="<%= editId.name  %>"
                      onclick="clrname()"
                    />
                    <% if (locals.mess) { %>
                    <p id="exist" class="text-danger"><%= locals.mess %></p>
                    <% } %>
                    <script>
                      setTimeout(() => {
                        document.getElementById("exist").style.display = "none";
                      }, 2000);
                    </script>
                    <p id="error1" class="text-danger"></p>
                  </div>

                  <div class="mb-4">
                    <label class="form-label">Description</label>
                    <textarea
                      placeholder="Type here"
                      class="form-control"
                      name="description"
                      id="description"
                      onclick="clrdes()"
                    >
                    <%= editId.description %></textarea
                    >
                    <p id="error2" class="text-danger"></p>
                  </div>
                  <div class="d-grid">
                    <button
                      class="btn btn-primary"
                      onclick="createCat()"
                      style="background-color: #3f2520"
                    >
                      Update
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script src="/admin-assets//js/vendors/jquery-3.6.0.min.js"></script>
    <script src="/admin-assets//js/vendors/bootstrap.bundle.min.js"></script>
    <script src="/admin-assets//js/vendors/select2.min.js"></script>
    <script src="/admin-assets//js/vendors/perfect-scrollbar.js"></script>
    <script src="/admin-assets//js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="/admin-assets//js/main.js" type="text/javascript"></script>
  </body>
  <script>
    function clrname() {
      document.getElementById("error1").textContent = "";
    }
    function clrdes() {
      document.getElementById("error2").textContent = "";
    }

    function createCat() {
      const catname = document.getElementById("name").value.trim();
      const catdes = document.getElementById("description").value.trim();

      const fillError = document.getElementById("fillerror");
      const nameError = document.getElementById("error1");
      const descError = document.getElementById("error2");

      fillError.textContent = "";
      nameError.textContent = "";
      descError.textContent = "";

      if (catname === "") {
        nameError.textContent = "Category name is required";
      } else if (catname.length < 3) {
        nameError.textContent = "Name must be atleast 3 charecter ";
      } else if (!/^[A-Z]+$/.test(catname)) {
        nameError.textContent = "Name can only contain capital letter";
      }

      if (catdes === "") {
        descError.textContent = "Address is required";
      } else if (!/^[a-zA-Z0-9\s,'/.()-]+$/.test(catdes)) {
        descError.textContent = "Enter valid description";
      }

      if (nameError.textContent !== "" || descError.textContent !== "") {
        event.preventDefault();
        fillError.textContent = "Enter fields";
        setTimeout(() => {
          fillError.textContent = "";
        }, 2000);
      }
    }
  </script>
</html>
